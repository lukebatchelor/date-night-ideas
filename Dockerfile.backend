# Dockerfile.backend
FROM oven/bun

WORKDIR /app

# Copy backend files
COPY backend/package.json backend/bun.lockb ./
RUN bun install

COPY backend/ .

# Copy the built frontend from the frontend build stage
COPY --from=frontend-build /app/dist ./frontend/dist

ENV NODE_ENV=production
EXPOSE 3000

CMD ["bun", "src/index.ts"]